program: src/main.py
method: bayes
metric:
  name: avg_acc
  goal: maximize

parameters:
  dataset:
    value: imagenet10
  scenario:
    value: class_inc
  model:
    value: vit
  method:
    value: composer_interval_penalization_big_model
  exp.seed: 
    value: 42      
  exp.batch_size:
    values: [128,64,32]     
  exp.epochs: 
    values: [5, 10]
  exp.gen_cm: 
    value: False
  exp.detect_anomaly:
    value: False
  fabric.accelerator:
    value: gpu   
  exp.log_per_batch:
    value: False
  exp.cleanup:
    value: True
  exp.dil:
    value: False

   # Model configuration
  model._target_:
    value: model.BigModel
  model.pretrained_backbone_name:
    value: "vit_b_16"
  model.frozen:
    value: True
  model.add_interval_activation_after_backbone:
    value: True
  model.head._target_:
    value: model.MLP
  model.head.initial_out_features:
    value: 2
  model.head.sizes:
    value: [768, 400]
  model.head.layers:
    value: ["Normal"]
  model.head.head_type:
    value: Normal
  model.head.activation:
    value: IntervalActivation

  # Scenario configuration
  scenario._partial_:
    value: True
  scenario._target_:
    value: continuum.ClassIncremental
  scenario.increment:
    value: 2

  # Method configuration
  method._partial_: 
    value: True
  method._target_: 
    value: method.Composer 
  method.retaingraph:
    value: True
  method.lr: 
    distribution: log_uniform_values 
    min: 0.0001
    max: 0.01
  method.plugins.0._target_:
    value: method.interval_penalization_big_model.BigModelIntervalPenalization
  method.plugins.0.var_scale: 
    distribution: uniform
    min: 0.0
    max: 10.0
  method.plugins.0.lambda_int_drift: 
    distribution: uniform
    min: 0.0
    max: 1000.0
  method.plugins.0.lambda_feat: 
    value: 0.0
  method.plugins.0.use_repr_align_loss:
    value: True
  method.plugins.0.dil_mode:
    value: False
  method.plugins.0.regularize_classifier:
    value: True
  

command:
  - ${env}
  - python
  - ${program}
  - --config-name
  - intact.yaml
  - ${args_no_hyphens}